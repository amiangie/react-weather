<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>React Weather app</title>
	<link rel="stylesheet" href="assets/css/weather-icons.min.css" />
	<link rel="stylesheet" href="assets/css/global.css" />
	<script>console.time('react-app')</script>
</head>
<body>
	
	<section class="weather-app" id="weather-app">
		<section class="weather-panels">
			<article class="weather-panel">
				<div class="weather-panel-icon">
					<i class="wi wi-day-sunny"></i>
				</div>
				<div class="weather-panel-info">
					<h1 class="weather-panel__title">Tallinn</h1>
					<p>
						<span class="weather-panel__temp">+20</span> | 
						<span class="weather-panel__desc">sunny</span>
					</p>
				</div>
			</article>
			<article class="weather-panel">
				<div class="weather-panel-icon">
					<i class="wi wi-day-sunny"></i>
				</div>
				<div class="weather-panel-info">
					<h1 class="weather-panel__title">Tallinn</h1>
					<p>
						<span class="weather-panel__temp">+20</span> | 
						<span class="weather-panel__desc">sunny</span>
					</p>
				</div>
			</article>
			<article class="weather-panel">
				<div class="weather-panel-icon">
					<i class="wi wi-day-sunny"></i>
				</div>
				<div class="weather-panel-info">
					<h1 class="weather-panel__title">Tallinn</h1>
					<p>
						<span class="weather-panel__temp">+20</span> | 
						<span class="weather-panel__desc">sunny</span>
					</p>
				</div>
			</article>
		</section>
		<section class="weather-form-holder">
			<form action="" class="weather-form">
				<input id="weather-search-input" placeholder="Add another place" onFocus="geolocate()" type="text" class="weather-form__input" autocomplete=off></input>
			</form>
		</section>
	</section>
   
   
    <script
			  src="http://code.jquery.com/jquery-2.2.4.min.js"
			  integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
			  crossorigin="anonymous"></script>
   
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyD4BNRTEnz1KRowjyWQAezIvaFsB5U7Sr4&signed_in=true&libraries=places&callback=initAutocomplete" async defer></script>
   	
   	<script>
		let autocomplete;

		function initAutocomplete() {
			autocomplete = new google.maps.places.Autocomplete(
				(document.getElementById('weather-search-input')),
				{types: ['geocode']}
			);
		}
		
		function geolocate() {
			if (navigator.geolocation) {
				navigator.geolocation.watchPosition(function(position) {
					var geolocation = {
						lat: position.coords.latitude,
						lng: position.coords.longitude
					};
					var circle = new google.maps.Circle({
						center: geolocation,
						radius: position.coords.accuracy
					});
					console.log('using geolocation')
					autocomplete.setBounds(circle.getBounds());
				}, function(error) {
					$.get("http://ipinfo.io", function(response) { 
					var geolocation = {
						lat: parseFloat(response.loc.split(',')[0]),
						lng: parseFloat(response.loc.split(',')[1])
					};
					var circle = new google.maps.Circle({
						center: geolocation,
						radius: 100
					});
					console.log('using ipinfo')
					autocomplete.setBounds(circle.getBounds());
				}, "jsonp");
				});
			}
		}
	</script>
	
	<script src="assets/js/bundle.js"></script>
</body>
</html>